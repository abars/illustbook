<div id="result"></div>

<script>
//テスト回数
var test_unit=2048*2048*4;

//ユーティリティ
function now_msec(){
	return +new Date();
}

function dump(id,result){
	document.getElementById("result").innerHTML+="<div style='width:400px;float:left;'>"+id+"</div>"+result+"ms<BR clear='all'>";
}

function calc(func,id){
	var start=now_msec();
	val=func();
	var end=now_msec();
	dump(id,end-start,val);
}

//ループ
var g_array;

function aloc_array(){
	g_array=new Array(test_unit);
}

function aloc_uint8_array(){
	g_array=new Uint8Array(test_unit);
}

function aloc_int16_array(){
	g_array=new Int16Array(test_unit);
}

function aloc_int32_array(){
	g_array=new Int32Array(test_unit);
}

function aloc_float32_array(){
	g_array=new Float32Array(test_unit);
}

function write_array_variable(){
	for(var i=0;i<test_unit;i++){
		g_array[i]=i;
	}
}

function write_array_int(){
	for(var i=0;i<test_unit;i++){
		g_array[i]=1;
	}
}

function write_array_float(){
	for(var i=0;i<test_unit;i++){
		g_array[i]=1.1;
	}
}

function read_array(){
	var sum=0;
	var cnt=g_array.length;
	for(var i=0;i<cnt;i++){
		sum+=g_array[i];
	}
	return sum;
}

calc(aloc_array,"aloc array");
calc(write_array_variable,"write array variable");
calc(write_array_int,"write array int");
calc(write_array_float,"write array float");
calc(read_array,"read array");

document.getElementById("result").innerHTML+="<BR>";

calc(aloc_float32_array,"aloc float32 array");
calc(write_array_variable,"write array variable");
calc(write_array_int,"write array int");
calc(write_array_float,"write array float");
calc(read_array,"read array");

document.getElementById("result").innerHTML+="<BR>";

calc(aloc_uint8_array,"aloc uint8 array");
calc(write_array_variable,"write array variable");
calc(write_array_int,"write array int");
calc(write_array_float,"write array float");
calc(read_array,"read array");

document.getElementById("result").innerHTML+="<BR>";

calc(aloc_int16_array,"aloc int16 array");
calc(write_array_variable,"write array variable");
calc(write_array_int,"write array int");
calc(write_array_float,"write array float");
calc(read_array,"read array");

document.getElementById("result").innerHTML+="<BR>";

calc(aloc_int32_array,"aloc int32 array");
calc(write_array_variable,"write array variable");
calc(write_array_int,"write array int");
calc(write_array_float,"write array float");
calc(read_array,"read array");

</script>
