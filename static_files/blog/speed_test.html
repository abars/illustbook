<div id="result"></div>
<canvas id="canvas" width=2048px height=2048px></canvas>

<script>
//テスト回数
var test_unit=2048*2048*4;

//ユーティリティ
function now_msec(){
	return +new Date();
}

function dump(id,result){
	document.getElementById("result").innerHTML+="<div style='width:400px;float:left;'>"+id+"</div>"+result+"ms<BR clear='all'>";
}

function calc(func,id){
	var start=now_msec();
	func();
	var end=now_msec();
	dump(id,end-start);
}

//基本演算
function calc_inc(){
	var a=0;
	for(var i=0;i<test_unit;i++){
		a++;
	}
	return a;
}

function calc_add_int(){
	var a=1;
	var b=2;
	for(var i=0;i<test_unit;i++){
		a=a+b;
	}
	return a;
}

function calc_add_int_or_zero(){
	var a=1;
	var b=2;
	for(var i=0;i<test_unit;i++){
		a=(a|0)+(b|0);
	}
	return a;
}

function calc_add_float(){
	var a=1.1;
	var b=2.2;
	for(var i=0;i<test_unit;i++){
		a=a+b;
	}
	return a;
}

function calc_mul(){
	var a=1;
	var b=2;
	for(var i=0;i<test_unit;i++){
		a=a*b;
	}
	return a;
}

function calc_div(){
	var a=1;
	var b=2;
	for(var i=0;i<test_unit;i++){
		a=a/b;
	}
	return a;
}

function calc_shift(){
	var a=1;
	var b=2;
	for(var i=0;i<test_unit;i++){
		a=a<<b;
	}
	return a;
}

calc(calc_inc,"a++");
calc(calc_add_int,"a+b(int)");
calc(calc_add_int_or_zero,"a+b(int)(|0)");
calc(calc_add_float,"a+b(float)");
calc(calc_mul,"a*b");
calc(calc_div,"a/b");
calc(calc_shift,"a < < b");

//ループ
var g_data=new Array(test_unit);
for(var i=0;i<test_unit;i++){
	g_data[i]=i;
}

function calc_loop1(){
	var sum=0;
	for(var i=0;i<g_data.length;i++){
		sum+=g_data[i];
	}
	return sum;
}

function calc_loop2(){
	var sum=0;
	var cnt=g_data.length;
	for(var i=0;i<cnt;i++){
		sum+=g_data[i];
	}
	return sum;
}

function get_value(data,i){
	return data[i];
}

function calc_function_loop(){
	var sum=0;
	var cnt=g_data.length;
	for(var i=0;i<cnt;i++){
		sum+=get_value(g_data,i);
	}
	return sum;
}

calc(calc_loop1,"array.length loop");
calc(calc_loop2,"local variable array loop");
calc(calc_function_loop,"function loop");

//キャンバス
var canvas=document.getElementById("canvas");
var context=canvas.getContext("2d");
var imageData;

function calc_get_image_data(){
	imageData=context.getImageData(0,0,canvas.width,canvas.height);
}

function calc_put_image_data(){
	context.putImageData(0,0,imageData);
}

calc(calc_get_image_data,"get image data(2048x2048px)");
calc(calc_get_image_data,"put image data(2048x2048px)");

</script>